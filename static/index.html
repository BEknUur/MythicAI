<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram-–∫–Ω–∏–≥–∞ ‚Ä¢ –ò—Å—Ç–æ—Ä–∏–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400;1,600&family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --paper-cream: #faf8f3;
            --text-charcoal: #2c2a26;
            --text-soft: #5a5652;
            --accent-rust: #b85450;
            --accent-gold: #d4af8c;
            --shadow-warm: rgba(60, 50, 40, 0.12);
            --border-subtle: rgba(212, 175, 140, 0.3);
        }
        
        body {
            font-family: 'Crimson Text', serif;
            background: var(--paper-cream);
            color: var(--text-charcoal);
            line-height: 1.7;
            font-size: 16px;
        }
        
        /* –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ */
        .literary-wrapper {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #ffffff;
            box-shadow: 0 8px 40px var(--shadow-warm);
            border-radius: 12px;
            margin-top: 40px;
            margin-bottom: 40px;
            position: relative;
        }
        
        .literary-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-rust), var(--accent-gold));
            border-radius: 12px 12px 0 0;
        }
        
        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤ —Å—Ç–∏–ª–µ –∫–Ω–∏–≥–∏ */
        .book-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            font-weight: 700;
            text-align: center;
            color: var(--text-charcoal);
            margin-bottom: 0.5rem;
            letter-spacing: -0.5px;
        }
        
        .book-subtitle {
            font-family: 'Libre Baskerville', serif;
            font-style: italic;
            font-size: 1.1rem;
            text-align: center;
            color: var(--text-soft);
            margin-bottom: 3rem;
            padding: 0 2rem;
        }
        
        /* –≠–ø–∏–≥—Ä–∞—Ñ */
        .epigraph {
            text-align: center;
            font-style: italic;
            color: var(--text-soft);
            border-top: 1px solid var(--border-subtle);
            border-bottom: 1px solid var(--border-subtle);
            padding: 2rem 0;
            margin: 3rem 0;
            font-size: 1.05rem;
            position: relative;
        }
        
        .epigraph::before, .epigraph::after {
            content: '‚ù¶';
            color: var(--accent-gold);
            font-size: 1.2rem;
            position: absolute;
        }
        
        .epigraph::before {
            left: 50%;
            top: -12px;
            transform: translateX(-50%);
            background: white;
            padding: 0 15px;
        }
        
        .epigraph::after {
            left: 50%;
            bottom: -12px;
            transform: translateX(-50%);
            background: white;
            padding: 0 15px;
        }
        
        /* –ü–∞—Ä–∞–≥—Ä–∞—Ñ—ã –≤ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–º —Å—Ç–∏–ª–µ */
        .literary-text {
            text-align: justify;
            text-indent: 2rem;
            margin-bottom: 1.5rem;
            line-height: 1.8;
            font-size: 1.1rem;
        }
        
        .literary-text:first-of-type {
            text-indent: 0;
            font-weight: 500;
        }
        
        /* –î–∏–∞–ª–æ–≥–∏ */
        .dialogue {
            font-style: italic;
            color: var(--text-soft);
            margin: 1.5rem 0;
            padding-left: 2rem;
            border-left: 3px solid var(--accent-gold);
            position: relative;
        }
        
        .dialogue::before {
            content: '‚Äî';
            position: absolute;
            left: -15px;
            color: var(--accent-rust);
            font-weight: bold;
        }
        
        /* –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –≤ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–º —Å—Ç–∏–ª–µ */
        .manuscript-form {
            background: linear-gradient(135deg, #fefcf8 0%, #f7f4ed 100%);
            padding: 3rem;
            border-radius: 12px;
            border: 1px solid var(--border-subtle);
            margin: 3rem 0;
            position: relative;
        }
        
        .manuscript-form::before {
            content: 'üìñ';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 10px;
            border-radius: 50%;
            box-shadow: 0 4px 12px var(--shadow-warm);
            font-size: 1.5rem;
        }
        
        .form-introduction {
            text-align: center;
            font-style: italic;
            color: var(--text-soft);
            margin-bottom: 2.5rem;
            font-size: 1.05rem;
        }
        
        .input-group {
            margin-bottom: 2rem;
        }
        
        .input-label {
            display: block;
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            color: var(--text-charcoal);
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
        }
        
        .literary-input {
            width: 100%;
            padding: 1rem 1.5rem;
            border: 2px solid var(--border-subtle);
            border-radius: 8px;
            font-family: 'Crimson Text', serif;
            font-size: 1.05rem;
            background: white;
            color: var(--text-charcoal);
            transition: all 0.3s ease;
        }
        
        .literary-input:focus {
            outline: none;
            border-color: var(--accent-rust);
            box-shadow: 0 0 0 3px rgba(184, 84, 80, 0.1);
        }
        
        .literary-input::placeholder {
            color: var(--text-soft);
            font-style: italic;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –≤ —Å—Ç–∏–ª–µ —Å—Ç–∞—Ä–æ–π –∫–Ω–∏–≥–∏ */
        .manuscript-btn {
            width: 100%;
            padding: 1.2rem 2rem;
            background: linear-gradient(135deg, var(--accent-rust), #9d4a46);
            color: white;
            border: none;
            border-radius: 8px;
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(184, 84, 80, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .manuscript-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: all 0.6s ease;
        }
        
        .manuscript-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(184, 84, 80, 0.4);
        }
        
        .manuscript-btn:hover::before {
            left: 100%;
        }
        
        .manuscript-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        /* –°—Ç–∞—Ç—É—Å –≤ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–º —Å—Ç–∏–ª–µ */
        .manuscript-status {
            margin-top: 2rem;
            padding: 2rem;
            border-radius: 12px;
            display: none;
            font-size: 1.05rem;
            position: relative;
            border-left: 5px solid;
        }
        
        .manuscript-status.writing {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-color: #f59e0b;
            color: #92400e;
        }
        
        .manuscript-status.complete {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            border-color: #10b981;
            color: #047857;
        }
        
        .manuscript-status.error {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border-color: #ef4444;
            color: #dc2626;
        }
        
        .progress-indicator {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 3px;
            margin: 1.5rem 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-rust), var(--accent-gold));
            width: 0%;
            transition: width 0.4s ease;
            border-radius: 3px;
        }
        
        /* –°—Å—ã–ª–∫–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è */
        .manuscript-downloads {
            margin-top: 1.5rem;
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .download-link {
            padding: 0.8rem 1.5rem;
            background: white;
            color: var(--accent-rust);
            text-decoration: none;
            border: 2px solid var(--accent-rust);
            border-radius: 6px;
            font-family: 'Crimson Text', serif;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }
        
        .download-link:hover {
            background: var(--accent-rust);
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(184, 84, 80, 0.3);
        }
        
        /* –û –∫–Ω–∏–≥–µ */
        .about-book {
            border-top: 1px solid var(--border-subtle);
            margin-top: 4rem;
            padding-top: 3rem;
        }
        
        .about-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--text-charcoal);
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .feature-card {
            padding: 1.5rem;
            background: linear-gradient(135deg, #fefcf8 0%, #f7f4ed 100%);
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
            text-align: center;
        }
        
        .feature-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        .feature-title {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            color: var(--text-charcoal);
            margin-bottom: 0.8rem;
        }
        
        .feature-description {
            color: var(--text-soft);
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        /* –ü–æ–¥–ø–∏—Å—å –∞–≤—Ç–æ—Ä–∞ */
        .author-signature {
            text-align: right;
            margin-top: 4rem;
            font-style: italic;
            color: var(--text-soft);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .literary-wrapper {
                margin: 20px;
                padding: 30px 20px;
            }
            
            .book-title {
                font-size: 2.2rem;
            }
            
            .manuscript-form {
                padding: 2rem;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="literary-wrapper">
        <h1 class="book-title">Instagram-–∫–Ω–∏–≥–∞</h1>
        <p class="book-subtitle">–°–æ–∑–¥–∞–Ω–∏–µ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏–π –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –ø—Ä–æ—Ñ–∏–ª–µ–π</p>
        
        <div class="epigraph">
            ¬´–ö–∞–∂–¥–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è ‚Äî —ç—Ç–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –º–≥–Ω–æ–≤–µ–Ω–∏–µ —á—å–µ–π-—Ç–æ –∂–∏–∑–Ω–∏¬ª
        </div>
        
        <p class="literary-text">
            –Ø –Ω–∞—Ç–∫–Ω—É–ª—Å—è –Ω–∞ —ç—Ç—É –∏–¥–µ—é —Å–ª—É—á–∞–π–Ω–æ, –∫–∞–∫ –Ω–∞—Ç—ã–∫–∞—é—Ç—Å—è –Ω–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã –≤ –ª–∞–±–∏—Ä–∏–Ω—Ç–µ —Å—Ç–∞—Ä–æ–≥–æ –≥–æ—Ä–æ–¥–∞. –õ–∏—Å—Ç–∞—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ª–µ–Ω—Ç—ã —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π, —è –ø–æ–Ω—è–ª: –∑–∞ –∫–∞–∂–¥—ã–º –ø—Ä–æ—Ñ–∏–ª–µ–º —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è, –∫–æ—Ç–æ—Ä—É—é —Å—Ç–æ–∏—Ç —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞ ‚Äî —á–µ—Å—Ç–Ω–æ, —Å —ç–º–æ—Ü–∏—è–º–∏ –∏ –±–µ–∑ –ø—Ä–∏–∫—Ä–∞—Å.
        </p>
        
        <p class="literary-text">
            –ß—Ç–æ –µ—Å–ª–∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —á–µ–π-—Ç–æ Instagram –≤ –Ω–∞—Å—Ç–æ—è—â—É—é –∫–Ω–∏–≥—É? –ù–µ –ø—Ä–æ—Å—Ç–æ –∫–æ–ª–ª–∞–∂ –∏–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π, –∞ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ, –≥–¥–µ —è —Å—Ç–∞–Ω–æ–≤–ª—é—Å—å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–º, –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–º —á—É–∂–æ–π –∂–∏–∑–Ω–∏, —Ä–∞—Å—Å–∫–∞–∑—á–∏–∫–æ–º –∏—Å—Ç–æ—Ä–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä—è—á—É—Ç—Å—è –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫ –ø–æ–¥–ø–∏—Å–µ–π –∫ –ø–æ—Å—Ç–∞–º.
        </p>
        
        <p class="literary-text">
            –ö–∞–∂–¥–∞—è –∫–Ω–∏–≥–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø—Ä–æ–ª–æ–≥–∞, –ø—è—Ç–∏ –≥–ª–∞–≤ –∏ —ç–ø–∏–ª–æ–≥–∞. –í –Ω–µ–π –∂–∏–≤—É—Ç –º–æ–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è –æ—Ç –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º, –º–æ–∏ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ —è –≤–∏–∂—É, –¥–∏–∞–ª–æ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –≤ –º–æ–µ–π –≥–æ–ª–æ–≤–µ –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π. –≠—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∑–∞ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ—Å–º—ã—Å–ª–µ–Ω–∏—è.
        </p>
        
        <div class="manuscript-form">
            <div class="form-introduction">
                –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π –Ω–∞ Instagram-–ø—Ä–æ—Ñ–∏–ª—å, –∏ —è —Å–æ–∑–¥–∞–º –¥–ª—è –≤–∞—Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –∫–Ω–∏–≥—É –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞
            </div>
            
            <form id="bookForm">
                <div class="input-group">
                    <label class="input-label">–°—Å—ã–ª–∫–∞ –Ω–∞ Instagram-–ø—Ä–æ—Ñ–∏–ª—å</label>
                    <input 
                        type="url" 
                        id="instagram-url" 
                        class="literary-input"
                        placeholder="https://instagram.com/username –∏–ª–∏ @username"
                        required
                    >
                </div>
                
                <button type="submit" class="manuscript-btn" id="generateBtn">
                    –°–æ–∑–¥–∞—Ç—å –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—É—é Instagram-–∫–Ω–∏–≥—É
                </button>
            </form>
            
            <div id="status" class="manuscript-status">
                <div id="statusMessage"></div>
                <div class="progress-indicator">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div id="downloadLinks" class="manuscript-downloads"></div>
            </div>
        </div>
        
        <div class="about-book">
            <h2 class="about-title">–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –≤–∞—à—É –∫–Ω–∏–≥—É</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üìñ</div>
                    <div class="feature-title">–û–±–ª–æ–∂–∫–∞ —Å —ç–ø–∏–≥—Ä–∞—Ñ–æ–º</div>
                    <div class="feature-description">
                        –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏, –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∫–æ—Ä–æ—Ç–∫–∏–π —ç–ø–∏–≥—Ä–∞—Ñ, –æ—Ç—Ä–∞–∂–∞—é—â–∏–π —Å—É—Ç—å –ø—Ä–æ—Ñ–∏–ª—è
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">‚úçÔ∏è</div>
                    <div class="feature-title">–ü—Ä–æ–ª–æ–≥ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞</div>
                    <div class="feature-description">
                        –ú–æ–π —Ä–∞—Å—Å–∫–∞–∑ –æ —Ç–æ–º, –∫–∞–∫ —è –≤–ø–µ—Ä–≤—ã–µ –Ω–∞—Ç–∫–Ω—É–ª—Å—è –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å –∏ —á—Ç–æ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üìö</div>
                    <div class="feature-title">–ü—è—Ç—å –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö –≥–ª–∞–≤</div>
                    <div class="feature-description">
                        –ö–∞–∂–¥–∞—è –≥–ª–∞–≤–∞ —Å —ç–ø–∏–≥—Ä–∞—Ñ–æ–º, 8-12 –∞–±–∑–∞—Ü–µ–≤ –∂–∏–≤–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∏ –æ–¥–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üñºÔ∏è</div>
                    <div class="feature-title">–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</div>
                    <div class="feature-description">
                        –†–µ–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è —Å –ø–æ—ç—Ç–∏—á–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –∏ –ø–æ–¥–ø–∏—Å—è–º–∏
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üí≠</div>
                    <div class="feature-title">–ñ–∏–≤—ã–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è</div>
                    <div class="feature-description">
                        30% –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π, 20% –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π, –¥–∏–∞–ª–æ–≥–∏
                    </div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üé≠</div>
                    <div class="feature-title">–≠–ø–∏–ª–æ–≥-–æ–±—Ä–∞—â–µ–Ω–∏–µ</div>
                    <div class="feature-description">
                        –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è –∏ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ —á–∏—Ç–∞—Ç–µ–ª—é –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞
                    </div>
                </div>
            </div>
        </div>
        
        <div class="dialogue">
            –ü–æ–º–Ω–∏—Ç–µ: –∫–∞–∂–¥–∞—è –∏—Å—Ç–æ—Ä–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–∞. –ê–ª–≥–æ—Ä–∏—Ç–º –Ω–µ —Å–æ–∑–¥–∞–µ—Ç —à–∞–±–ª–æ–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã ‚Äî –∫–∞–∂–¥–∞—è –∫–Ω–∏–≥–∞ –ø–∏—à–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–º –ø—Ä–æ—Ñ–∏–ª—è.
        </div>
        
        <div class="author-signature">
            ‚Äî –í–∞—à —Ü–∏—Ñ—Ä–æ–≤–æ–π —Ä–∞—Å—Å–∫–∞–∑—á–∏–∫
        </div>
    </div>

    <script>
        let currentRunId = null;
        let checkInterval = null;

        document.getElementById('bookForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const url = document.getElementById('instagram-url').value;
            const btn = document.getElementById('generateBtn');
            
            btn.disabled = true;
            btn.innerHTML = '–°–æ–∑–¥–∞—é –≤–∞—à—É –∏—Å—Ç–æ—Ä–∏—é...';
            
            try {
                // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è
                const scrapeResponse = await fetch(`/start-scrape?url=${encodeURIComponent(url)}`);
                const scrapeData = await scrapeResponse.json();
                
                if (!scrapeResponse.ok) {
                    throw new Error(scrapeData.detail || '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è');
                }
                
                currentRunId = scrapeData.runId;
                showStatus('writing', '–ò–∑—É—á–∞—é –ø—Ä–æ—Ñ–∏–ª—å –∏ —Å–æ–±–∏—Ä–∞—é –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –∫–Ω–∏–≥–∏...');
                startProgress();
                
                // –°–æ–∑–¥–∞–µ–º –∫–Ω–∏–≥—É –ø–æ—Å–ª–µ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
                setTimeout(async () => {
                    try {
                        const bookResponse = await fetch('/create-book', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                runId: currentRunId,
                                format: 'classic' // –í—Å–µ–≥–¥–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–π –∫–Ω–∏–≥–∏
                            })
                        });
                        
                        const bookData = await bookResponse.json();
                        
                        if (bookResponse.ok) {
                            updateProgress(50, '–ü–∏—à—É –≥–ª–∞–≤—ã –∏ –≤—Å—Ç—Ä–∞–∏–≤–∞—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏...');
                            checkInterval = setInterval(checkStatus, 2000);
                        } else {
                            throw new Error(bookData.detail || '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–Ω–∏–≥–∏');
                        }
                    } catch (error) {
                        showStatus('error', `–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è: ${error.message}`);
                        resetButton();
                    }
                }, 6000);
                
            } catch (error) {
                showStatus('error', `–û—à–∏–±–∫–∞: ${error.message}`);
                resetButton();
            }
        });

        async function checkStatus() {
            if (!currentRunId) return;
            
            try {
                const response = await fetch(`/status/${currentRunId}`);
                const data = await response.json();
                
                if (data.stages.data_collected) {
                    updateProgress(33, '–î–∞–Ω–Ω—ã–µ —Å–æ–±—Ä–∞–Ω—ã, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ...');
                }
                
                if (data.stages.images_downloaded) {
                    updateProgress(66, '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –ø–∏—à—É –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç...');
                }
                
                if (data.stages.book_generated) {
                    updateProgress(100, '–í–∞—à–∞ Instagram-–∫–Ω–∏–≥–∞ –≥–æ—Ç–æ–≤–∞!');
                    clearInterval(checkInterval);
                    
                    const profileInfo = data.profile ? 
                        `–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–∞—è –∫–Ω–∏–≥–∞ –ø–æ –ø—Ä–æ—Ñ–∏–ª—é @${data.profile.username} —Å–æ–∑–¥–∞–Ω–∞` : 
                        '–í–∞—à–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è Instagram-–∫–Ω–∏–≥–∞ –≥–æ—Ç–æ–≤–∞ –∫ —á—Ç–µ–Ω–∏—é';
                    
                    showStatus('complete', profileInfo);
                    
                    const downloadHtml = `
                        <a href="/view/${currentRunId}/book.html" class="download-link" target="_blank">üìñ –ß–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É</a>
                        <a href="/download/${currentRunId}/book.pdf" class="download-link">üìÑ –°–∫–∞—á–∞—Ç—å PDF</a>
                        <a href="/download/${currentRunId}/book.md" class="download-link">üìù –ò—Å—Ö–æ–¥–Ω–∏–∫</a>
                    `;
                    document.getElementById('downloadLinks').innerHTML = downloadHtml;
                    
                    resetButton();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:', error);
            }
        }

        function showStatus(type, message) {
            const status = document.getElementById('status');
            const statusMessage = document.getElementById('statusMessage');
            
            status.className = `manuscript-status ${type}`;
            status.style.display = 'block';
            statusMessage.innerHTML = message;
        }

        function updateProgress(percent, message) {
            document.getElementById('progressFill').style.width = `${percent}%`;
            document.getElementById('statusMessage').innerHTML = message;
        }

        function startProgress() {
            updateProgress(10, '–ù–∞—á–∏–Ω–∞—é —Ä–∞–±–æ—Ç—É –Ω–∞–¥ –≤–∞—à–µ–π –∫–Ω–∏–≥–æ–π...');
        }

        function resetButton() {
            const btn = document.getElementById('generateBtn');
            btn.disabled = false;
            btn.innerHTML = '–°–æ–∑–¥–∞—Ç—å –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—É—é Instagram-–∫–Ω–∏–≥—É';
        }
    </script>
</body>
</html> 